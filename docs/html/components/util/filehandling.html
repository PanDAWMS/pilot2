
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>filehandling &#8212; Pilot 2  documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="harvester" href="harvester.html" />
    <link rel="prev" title="disk" href="disk.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-pilot.util.filehandling">
<span id="filehandling"></span><h1>filehandling<a class="headerlink" href="#module-pilot.util.filehandling" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="pilot.util.filehandling._define_tabledict_keys">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">_define_tabledict_keys</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separator</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#_define_tabledict_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling._define_tabledict_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the keys for the tabledict dictionary.
Note: this function is only used by parse_table_from_file().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>header</strong> – header string.</p></li>
<li><p><strong>fields</strong> – header content string.</p></li>
<li><p><strong>separator</strong> – separator character (char).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tabledict (dictionary), keylist (ordered list with dictionary key names).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.add_to_total_size">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">add_to_total_size</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#add_to_total_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.add_to_total_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the size of file in the given path to the total size of all in/output files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – path to file (string).</p></li>
<li><p><strong>total_size</strong> – prior total size of all input/output files (long).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>total size of all input/output files (long).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.calculate_adler32_checksum">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">calculate_adler32_checksum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#calculate_adler32_checksum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.calculate_adler32_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the adler32 checksum for the given file.
The file is assumed to exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – file name (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>checksum value (string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.calculate_checksum">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">calculate_checksum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'adler32'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#calculate_checksum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.calculate_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the checksum value for the given file.
The default algorithm is adler32. Md5 is also be supported.
Valid algorithms are 1) adler32/adler/ad32/ad, 2) md5/md5sum/md.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – file name (string).</p></li>
<li><p><strong>algorithm</strong> – optional algorithm string.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="../common/exception.html#pilot.common.exception.FileHandlingFailure" title="pilot.common.exception.FileHandlingFailure"><strong>FileHandlingFailure</strong></a><strong>, </strong><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#NotImplementedError" title="(in Python v3.9)"><strong>NotImplementedError</strong></a> – exception raised when file does not exist or for unknown algorithm.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>checksum value (string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.calculate_md5_checksum">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">calculate_md5_checksum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#calculate_md5_checksum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.calculate_md5_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the md5 checksum for the given file.
The file is assumed to exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – file name (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>checksum value (string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.convert">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">convert</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#convert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert unicode data to utf-8.</p>
<p>Usage examples:
1. Dictionary:</p>
<blockquote>
<div><dl class="simple">
<dt>data = {u’Max’: {u’maxRSS’: 3664, u’maxSwap’: 0, u’maxVMEM’: 142260, u’maxPSS’: 1288}, u’Avg’:</dt><dd><p>{u’avgVMEM’: 94840, u’avgPSS’: 850, u’avgRSS’: 2430, u’avgSwap’: 0}}</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>convert(data)</dt><dd><dl class="simple">
<dt>{‘Max’: {‘maxRSS’: 3664, ‘maxSwap’: 0, ‘maxVMEM’: 142260, ‘maxPSS’: 1288}, ‘Avg’: {‘avgVMEM’: 94840,</dt><dd><p>‘avgPSS’: 850, ‘avgRSS’: 2430, ‘avgSwap’: 0}}</p>
</dd>
</dl>
</dd>
</dl>
<ol class="arabic simple" start="2">
<li><p>String:</p></li>
</ol>
<blockquote>
<div><p>data = u’hello’</p>
</div></blockquote>
<dl class="simple">
<dt>convert(data)</dt><dd><p>‘hello’</p>
</dd>
</dl>
<ol class="arabic simple" start="3">
<li><p>List:</p></li>
</ol>
<blockquote>
<div><p>data = [u’1’,u’2’,’3’]</p>
</div></blockquote>
<dl class="simple">
<dt>convert(data)</dt><dd><p>[‘1’, ‘2’, ‘3’]</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – unicode object to be converted to utf-8</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>converted data to utf-8</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.copy">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">copy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy path1 to path2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path1</strong> – file path (string).</p></li>
<li><p><strong>path2</strong> – file path (string).</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="../common/exception.html#pilot.common.exception.PilotException" title="pilot.common.exception.PilotException"><strong>PilotException</strong></a> – FileHandlingFailure, NoSuchFile</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.copy_pilot_source">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">copy_pilot_source</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#copy_pilot_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.copy_pilot_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the pilot source into the work directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>workdir</strong> – working directory (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>diagnostics (string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.create_symlink">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">create_symlink</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#create_symlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.create_symlink" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a symlink from/to the given paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_path</strong> – from path (string).</p></li>
<li><p><strong>to_path</strong> – to path (string).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.dump">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">dump</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cat'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the content of the file in the given path to the log.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – file path (string).</p></li>
<li><p><strong>cmd</strong> – optional command (string).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cat (string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.establish_logging">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">establish_logging</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pilotlog.txt'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#establish_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.establish_logging" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup and establish logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – pilot arguments object.</p></li>
<li><p><strong>filename</strong> – name of log file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.find_executable">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">find_executable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#find_executable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.find_executable" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the command ‘name’ available locally?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – command name (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>full path to command if it exists, otherwise empty string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.find_latest_modified_file">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">find_latest_modified_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_of_files</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#find_latest_modified_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.find_latest_modified_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the most recently modified file among the list of given files.
In case int conversion of getmtime() fails, int(time.time()) will be returned instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list_of_files</strong> – list of files with full paths.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>most recently updated file (string), modification time (int).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_checksum_type">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_checksum_type</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">checksum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_checksum_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_checksum_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the checksum type (ad32 or md5).
The given checksum can be either be a standard ad32 or md5 value, or a dictionary with the format
{ checksum_type: value } as defined in the <code class="xref any docutils literal notranslate"><span class="pre">FileSpec</span></code> class.
In case the checksum type cannot be identified, the function returns ‘unknown’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>checksum</strong> – checksum string or dictionary.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>checksum type (string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_checksum_value">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_checksum_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">checksum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_checksum_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_checksum_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the checksum value.
The given checksum might either be a standard ad32 or md5 string, or a dictionary with the format
{ checksum_type: value } as defined in the <code class="xref any docutils literal notranslate"><span class="pre">FileSpec</span></code> class. This function extracts the checksum value from this
dictionary (or immediately returns the checksum value if the given value is a string).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>checksum</strong> – checksum object (string or dictionary).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>checksum. checksum string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_directory_size">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_directory_size</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_directory_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_directory_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the size of the given directory in B.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> – directory name (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>size of directory (int).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_files">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'*.log'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all files whose names follow the given pattern.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> – file name pattern (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of files.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_guid">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_guid</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_guid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_guid" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a GUID using the uuid library.
E.g. guid = ‘92008FAF-BE4C-49CF-9C5C-E12BC74ACD19’</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a random GUID (string)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_local_file_size">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_local_file_size</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_local_file_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_local_file_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the file size of a local file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – file name (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>file size (int).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_nonexistant_path">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_nonexistant_path</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_nonexistant_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_nonexistant_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path to a filename which does not exist by incrementing path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fname_path</strong> – file name path (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>file name path (string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_pilot_work_dir">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_pilot_work_dir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_pilot_work_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_pilot_work_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the full path to the main PanDA Pilot work directory. Called once at the beginning of the batch job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>workdir</strong> – The full path to where the main work directory should be created</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The name of main work directory</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_table_from_file">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_table_from_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\t'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_to_float</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_table_from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_table_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a table of data from a txt file.
E.g.
header=”Time VMEM PSS RSS Swap rchar wchar rbytes wbytes”
or the first line in the file is
Time VMEM PSS RSS Swap rchar wchar rbytes wbytes
each of which will become keys in the dictionary, whose corresponding values are stored in lists, with the entries
corresponding to the values in the rows of the input file.</p>
<p>The output dictionary will have the format
{‘Time’: [ .. data from first row .. ], ‘VMEM’: [.. data from second row], ..}</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – name of input text file, full path (string).</p></li>
<li><p><strong>header</strong> – header string.</p></li>
<li><p><strong>separator</strong> – separator character (char).</p></li>
<li><p><strong>convert_to_float</strong> – boolean, if True, all values will be converted to floats.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.get_valid_path_from_list">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">get_valid_path_from_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">paths</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#get_valid_path_from_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.get_valid_path_from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first valid path from the given list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>paths</strong> – list of file paths.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>first valid path from list (string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.grep">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">grep</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patterns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#grep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.grep" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for the patterns in the given list in a file.</p>
<dl>
<dt>Example:</dt><dd><p>grep([“St9bad_alloc”, “FATAL”], “athena_stdout.txt”)
-&gt; [list containing the lines below]</p>
<blockquote>
<div><p>CaloTrkMuIdAlg2.sysExecute()             ERROR St9bad_alloc
AthAlgSeq.sysExecute()                   FATAL  Standard std::exception is caught</p>
</div></blockquote>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>patterns</strong> – list of regexp patterns.</p></li>
<li><p><strong>file_name</strong> – file name (string).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of matched lines in file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.is_json">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">is_json</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#is_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.is_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the file is in JSON format.
The function reads the first character of the file, and if it is “{” then returns True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_file</strong> – file name (string)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Boolean.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.mkdirs">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">mkdirs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chmod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">504</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#mkdirs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.mkdirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a directory.
Perform a chmod if set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir</strong> – Full path to the directory to be created</p></li>
<li><p><strong>chmod</strong> – chmod code (default 0770) (octal).</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="../common/exception.html#pilot.common.exception.PilotException" title="pilot.common.exception.PilotException"><strong>PilotException</strong></a> – MKDirFailure.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.open_file">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">open_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#open_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.open_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Open and return a file pointer for the given mode.
Note: the caller needs to close the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – file name (string).</p></li>
<li><p><strong>mode</strong> – file mode (character).</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="../common/exception.html#pilot.common.exception.PilotException" title="pilot.common.exception.PilotException"><strong>PilotException</strong></a> – FileHandlingFailure.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>file pointer.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.read_file">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">read_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#read_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.read_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Open, read and close a file.
:param filename: file name (string).
:param mode:
:return: file contents (string).</p>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.read_json">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">read_json</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#read_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.read_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a dictionary with unicode to utf-8 conversion</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – </p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="../common/exception.html#pilot.common.exception.PilotException" title="pilot.common.exception.PilotException"><strong>PilotException</strong></a> – FileHandlingFailure, ConversionFailure</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>json dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.read_list">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">read_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#read_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.read_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a list from a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – file name (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.remove">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">remove</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove file.
:param path: path to file (string).
:return: 0 if successful, -1 if failed (int)</p>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.remove_core_dumps">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">remove_core_dumps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#remove_core_dumps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.remove_core_dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any remaining core dumps so they do not end up in the log tarball</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>workdir</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Boolean (True if a core dump is found)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.remove_dir_tree">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">remove_dir_tree</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#remove_dir_tree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.remove_dir_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove directory tree.
:param path: path to directory (string).
:return: 0 if successful, -1 if failed (int)</p>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.remove_empty_directories">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">remove_empty_directories</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#remove_empty_directories"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.remove_empty_directories" title="Permalink to this definition">¶</a></dt>
<dd><p>Removal of empty directories in the given src_dir tree.
Only empty directories will be removed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>src_dir</strong> – directory to be purged of empty directories.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.remove_files">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">remove_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#remove_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.remove_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all given files from workdir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir</strong> – working directory (string).</p></li>
<li><p><strong>files</strong> – file list.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>exit code (0 if all went well, -1 otherwise)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.rmdirs">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">rmdirs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#rmdirs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.rmdirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove directory in path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – path to directory to be removed (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Boolean (True if success).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.scan_file">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">scan_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_messages</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warning_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#scan_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.scan_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan file for known error messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – path to file (string).</p></li>
<li><p><strong>error_messages</strong> – list of error messages.</p></li>
<li><p><strong>warning_message</strong> – optional warning message to printed with any of the error_messages have been found (string).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Boolean. (note: True means the error was found)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.tail">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">tail</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#tail"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the last n lines of a file.
Note: the function uses the posix tail function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – name of file to do the tail on (string).</p></li>
<li><p><strong>nlines</strong> – number of lines (int).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>file tail (str).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.tar_files">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">tar_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wkdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">excludedfiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logfile_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attempt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#tar_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.tar_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Tarring of files in given directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wkdir</strong> – work directory (string)</p></li>
<li><p><strong>excludedfiles</strong> – list of files to be excluded from tar operation (list)</p></li>
<li><p><strong>logfile_name</strong> – file name (string)</p></li>
<li><p><strong>attempt</strong> – attempt number (integer)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if successful, 1 in case of error (int)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.touch">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">touch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#touch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.touch" title="Permalink to this definition">¶</a></dt>
<dd><p>Touch a file and update mtime in case the file exists.
Default to use execute() if case of python problem with appending to non-existant path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – full path to file to be touched (string).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.update_extension">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">update_extension</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#update_extension"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.update_extension" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the file name extension to the given extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – file path (string).</p></li>
<li><p><strong>extension</strong> – new extension (string).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>file path with new extension (string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.verify_file_list">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">verify_file_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_of_files</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#verify_file_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.verify_file_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure that the files in the given list exist, return the list of files that does exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list_of_files</strong> – file list.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of existing files.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.write_file">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">write_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'w'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#write_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.write_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the given contents to a file.
If unique=True, then if the file already exists, an index will be added (e.g. ‘out.txt’ -&gt; ‘out-1.txt’)
:param path: full path for file (string).
:param contents: file contents (object).
:param mute: boolean to control stdout info message.
:param mode: file mode (e.g. ‘w’, ‘r’, ‘a’, ‘wb’, ‘rb’) (string).
:param unique: file must be unique (Boolean).
:raises PilotException: FileHandlingFailure.
:return: True if successful, otherwise False.</p>
</dd></dl>

<dl class="py function">
<dt id="pilot.util.filehandling.write_json">
<code class="sig-prename descclassname"><span class="pre">pilot.util.filehandling.</span></code><code class="sig-name descname"><span class="pre">write_json</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(',',</span> <span class="pre">':</span> <span class="pre">')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pilot/util/filehandling.html#write_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pilot.util.filehandling.write_json" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Write the dictionary to a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">param filename</dt>
<dd class="field-odd"><p>file name (string).</p>
</dd>
<dt class="field-even">param data</dt>
<dd class="field-even"><p>object to be written to file (dictionary or list).</p>
</dd>
<dt class="field-odd">param sort_keys</dt>
<dd class="field-odd"><p>should entries be sorted? (boolean).</p>
</dd>
<dt class="field-even">param indent</dt>
<dd class="field-even"><p>indentation level, default 4 (int).</p>
</dd>
<dt class="field-odd">param separators</dt>
<dd class="field-odd"><p>field separators (default (‘,’, ‘: ‘) for dictionaries, use e.g. (‘,</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>‘) for lists) (tuple)</dt><dd><dl class="field-list simple">
<dt class="field-odd">raises PilotException</dt>
<dd class="field-odd"><p>FileHandlingFailure.</p>
</dd>
<dt class="field-even">return</dt>
<dd class="field-even"><p>status (boolean).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Pilot 2</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">api components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common/index.html">common components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control/index.html">control components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../copytool/index.html">copytool components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eventservice/index.html">eventservice components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../info/index.html">info components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resource/index.html">resource components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/index.html">user components</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">util components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflow/index.html">workflow components</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Components</a><ul>
  <li><a href="index.html">util components</a><ul>
      <li>Previous: <a href="disk.html" title="previous chapter">disk</a></li>
      <li>Next: <a href="harvester.html" title="next chapter">harvester</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/components/util/filehandling.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Paul Nilsson, Mario Lassnig, Daniil Drizhuk, ....
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/components/util/filehandling.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>